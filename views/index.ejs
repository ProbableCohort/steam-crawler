<!DOCTYPE html>
<html>
  <head>

    <base href="/">

    <meta name="viewsport" content="width=device-width, initial-scale=1.0">
    <script type="text/javascript" src="/bower_components/angular/angular.min.js"></script>
    <script type="text/javascript" src="/bower_components/angular-resource/angular-resource.min.js"></script>
    <script type="text/javascript" src="/bower_components/angular-filter/dist/angular-filter.min.js"></script>
    <script type="text/javascript" src="/bower_components/angular-bootstrap/ui-bootstrap-tpls.min.js"></script>

    <script type="text/javascript" src="/javascripts/classes/Exception.class.js"></script>

    <script type="text/javascript" src="/javascripts/steamCrawlerApp.js"></script>
    <script type="text/javascript" src="/javascripts/s/mainService.js"></script>
    <script type="text/javascript" src="/javascripts/s/steamApiService.js"></script>
    <script type="text/javascript" src="/javascripts/s/crawlerApiService.js"></script>
    <script type="text/javascript" src="/javascripts/c/mainCtrl.js"></script>

    <script type="text/javascript" src="/javascripts/d/steamPersonaHistoryDropdown.js"></script>
    <script type="text/javascript" src="/javascripts/d/steamUserMediaBadge.js"></script>
    <script type="text/javascript" src="/javascripts/d/customButtonGroup.js"></script>

    <link rel="stylesheet" href="/bower_components/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" />
    <link rel="stylesheet" href="/stylesheets/style.css" />
    <link href="https://fonts.googleapis.com/css?family=Duru+Sans" rel="stylesheet">

  </head>
  <body ng-app="steamCrawlerApp" ng-cloak>
    <div class="container" ng-controller="mainCtrl">
      <div class="jumbotron jumbotron-slim">
        <h1><span class="fa fa-steam fa-lg"></span> {{ 'Steam Crawler' | uppercase }}</h1>
      </div>
      <div class="row">
        <div class="col-xs-12">
            <custom-button-group ng-model="views.general"></custom-button-group>
        </div>
        <div class="col-xs-12" ng-show="views.general.recent.show">
          <h3>
            {{ 'Recently Viewed Profiles' | uppercase }}
            <a ng-click="getRecent()"><span class="fa fa-refresh fa-steam-href fa-lg"></span></a>
            <!-- <a class="btn btn-steam" ng-click="getRecent()">Refresh Recent <span class="fa fa-refresh fa-steam-href fa-lg"></span></a> -->
          </h3>
          <div class="row">
              <steam-user-media-badge class="col-sm-4" ng-model="p" small col="1" ng-repeat="p in recent"></steam-user-media-badge>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-xs-12">
            <custom-button-group ng-model="views.search"></custom-button-group>
        </div>
        <br />
        <br />
        <div class="row">
          <div class="col-xs-12">
            <div class="form-group col-xs-4" ng-show="views.search.steamName.show">
              <label>Steam Name</label>
              <div class="input-group">
                <input class="form-control form-control-steam" type="text"
                  ng-model="player.personaname" ng-change="findPlayerByName(player.personaname)" ng-model-options="{ debounce : 300 }"/>
                <span class="input-group-btn">
                  <a class="btn btn-steam"><span class="fa fa-search"></span></a>
                </span>
              </div>
            </div>
            <div class="form-group col-xs-4" ng-show="views.search.playerId.show">
              <label>PlayerID</label>
              <div class="input-group">
                <input class="form-control form-control-steam" type="text"
                  ng-model="player.steamid" ng-change="findPlayerInfo(player.steamid)" ng-model-options="{ debounce : 300 }"/>
                <span class="input-group-btn">
                  <a class="btn btn-steam"><span class="fa fa-search"></span></a>
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="col-xs-12" ng-show="!ready && !player">
        Search for a player.
      </div>
      <div class="row" ng-show="history.length">
        <div class="col-xs-12">
          <h4>Previous Searches</h4>
        </div>
        <div class="col-sm-4" style="margin-bottom: 5px;" ng-repeat="player in history | unique:'personaname'">
          <img ng-src="{{player.avatar}}" />
          <a ng-click="findPlayerInfo(player.steamid)">{{player.personaname}}</a>
        </div>
      </div>
      <br />
      <hr />
      <div class="row">
        <div class="col-xs-12" ng-show="!ready && player">
          Loading Player Data
        </div>
        <div class="col-xs-12" ng-show="ready && player">
          <h3>Player Found</h3>
          <steam-user-media-badge ng-model="player" col="2"></steam-user-media-badge>
          <custom-button-group ng-model="views.result"></custom-button-group>
        </div>
        <div class="col-xs-12" ng-show="ready && views.result.profile.show">
          <h3>Profile</h3>
          <div class="" ng-repeat="h in player.personahistory | unique:'avatarfull'">
              <img ng-src="{{h.avatarfull}}" />
          </div>
        </div>
        <div class="col-xs-12" ng-show="ready && views.result.friends.show">
          <h3>Friends</h3>
          <div>
            This player has {{player.friendsList.length}} friends
          </div>
          <br />
          <div style="margin-left: 30px;">
            <steam-user-media-badge class="col-sm-6" ng-model="friend" col="1" ng-repeat="friend in player.friends | orderBy:'status'"></steam-user-media-badge>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
